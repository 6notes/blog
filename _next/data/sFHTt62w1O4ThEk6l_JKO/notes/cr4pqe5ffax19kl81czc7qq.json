{"pageProps":{"note":{"id":"cr4pqe5ffax19kl81czc7qq","title":"multiSSH","desc":"","updated":1681108797142,"created":1677486506165,"custom":{},"fname":"blog.coding.github.multiSSH","type":"note","vault":{"fsPath":".","selfContained":true,"name":"blog","remote":{"type":"git","url":"git@blog:6notes/blog.git"}},"contentHash":"4f922d52d8aa774cf759391c7007e0a5","links":[],"anchors":{"summary":{"type":"header","text":"Summary","value":"summary","line":8,"column":0,"depth":1},"outline":{"type":"header","text":"Outline","value":"outline","line":13,"column":0,"depth":1},"using-git-with-multiple-ssh-keys-and-multiple-accounts":{"type":"header","text":"Using git with multiple ssh keys and multiple accounts","value":"using-git-with-multiple-ssh-keys-and-multiple-accounts","line":19,"column":0,"depth":1},"ssh-keys":{"type":"header","text":"SSH keys","value":"ssh-keys","line":34,"column":0,"depth":1},"git-configuration":{"type":"header","text":"Git configuration","value":"git-configuration","line":105,"column":0,"depth":1},"additional-notes":{"type":"header","text":"Additional notes","value":"additional-notes","line":133,"column":0,"depth":1},"resources":{"type":"header","text":"Resources","value":"resources","line":154,"column":0,"depth":1}},"children":[],"parent":"ql4hbmd84zhgb8u8q42kb0h","data":{}},"body":"<h1 id=\"multissh\">multiSSH<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#multissh\"></a></h1>\n<h1 id=\"summary\">Summary<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#summary\"></a></h1>\n<p>You have a private repo and you want to publish a portion of it without having\nto manually copy files between repos.</p>\n<h1 id=\"outline\">Outline<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#outline\"></a></h1>\n<ul>\n<li>Set up the repos and accounts</li>\n<li>Set up multiple ssh</li>\n<li>Set up the Github pushing with rsync</li>\n</ul>\n<h1 id=\"using-git-with-multiple-ssh-keys-and-multiple-accounts\">Using git with multiple ssh keys and multiple accounts<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#using-git-with-multiple-ssh-keys-and-multiple-accounts\"></a></h1>\n<ul>\n<li>Situation: You want to commit to two different repos with two different\naccounts.</li>\n<li>You can do this by:\n<ul>\n<li>Generating SSH keys for both accounts.\n<ul>\n<li>Make sure you don't have a <code>*</code> host because it will override the others.</li>\n</ul>\n</li>\n<li>Register the public keys for their respective GitHub accounts.</li>\n<li><a href=\"https://stackoverflow.com/a/69580744\">Setup <code>~/.ssh/config</code></a> so that each\naccount/GitHub host has its own ssh file.</li>\n<li>Setup the git origin to have the modified host so that it uses your\ncorresponding ssh key.</li>\n<li>Clone the repos.</li>\n<li>In each repo, use <code>git config</code>s to set the user name and email.</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"ssh-keys\">SSH keys<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#ssh-keys\"></a></h1>\n<ul>\n<li>\n<p>If you have\n<a href=\"https://gist.github.com/jexchan/2351996?permalink_comment_id=4286595#gistcomment-4286595\">a generic <code>*</code> host</a>,\nyou'll need to make it un-generic. This is because regardless of all of your\nsettings, having a generic host will supercede everything.</p>\n</li>\n<li>\n<p>For notation, I will use <code>{variable}</code> to denote variable names.</p>\n<ul>\n<li>Say you have <code>url = git@github.com:{workplaceName}/{workRepo}.git</code> in\n<code>{workRepo}/.git/config</code>. If <code>workplaceName = 'bar'; workRepo = 'chair'</code>,\nthen the url would look like <code>url = git@github.com:bar/chair.git</code> and it\nwould be in <code>bar/.git/config</code>)</li>\n</ul>\n</li>\n<li>\n<p>Say you have a cloned work repo with\n<code>url = git@github.com:{workplaceName}/{workRepo}.git</code> in\n<code>{workRepo}/.git/config</code>, you have another cloned personal repo with\n<code>url = git@github.com:{personal}/{personalRepo}.git</code> in\n<code>{personalRepo}/.git/config</code>, and a <code>~/.ssh/config</code> file with:</p>\n<pre class=\"language-{ssh\"><code class=\"language-{ssh\"># Work/All purpose\nHost *\n  AddKeysToAgent yes\n  UseKeychain yes\n  IdentityFile ~/.ssh/id_rsa\n\n# Personal\nHost github.com-personal\n  HostName github.com\n  User git\n  IdentityFile ~/.ssh/id_rsa_personal\n</code></pre>\n<p>The default ssh keys for both the work and personal repos will be the work ssh\nkey because the <code>*</code> host setting takes priority over all of the other hosts.</p>\n</li>\n<li>\n<p>Here's what you can do to fix this:</p>\n<ul>\n<li>Modify the <code>*</code> host:\n<ul>\n<li>Change the host to <code>work</code>.</li>\n<li>Add <code>User git</code>.</li>\n<li>Possibly optional: Add <code>IdentitiesOnly yes</code></li>\n</ul>\n</li>\n<li>Modify <code>workRepo/.git/config</code>:\n<ul>\n<li>Change the url to <code>work:workplaceName/workplaceName.git</code>.</li>\n</ul>\n</li>\n<li>Possibly optional: Modify the <code>github.com-personal</code> host:\n<ul>\n<li>Add <code>IdentitiesOnly yes</code></li>\n</ul>\n</li>\n<li>Modify <code>personalRepo/.git/config</code>:\n<ul>\n<li>Change the url to <code>git@github.com-personal:personalName/personalRepo.git</code></li>\n</ul>\n</li>\n<li>The updated config file should look like this:</li>\n</ul>\n<pre class=\"language-{ssh\"><code class=\"language-{ssh\">Host work\n  HostName github.com\n  User git\n  AddKeysToAgent yes\n  UseKeychain yes\n  IdentityFile ~/.ssh/id_rsa\n  IdentitiesOnly yes\n\nHost github.com-personal\n  HostName github.com\n  User git\n  IdentityFile ~/.ssh/id_rsa_personal\n  IdentitiesOnly yes\n</code></pre>\n</li>\n<li>\n<p>You can verify that the ssh keys are set up properly by doing the following:</p>\n<ul>\n<li>Use <code>ssh -T {Host}</code> for both hosts.\n<ul>\n<li>You can use <code>ssh -vT {Host}</code> instead for a more verbose message for\ndebugging.</li>\n<li>You should get something like: <code>Hi {sshName}! You've successfully ...</code>,\nand the ssh names should be different between the repos.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"git-configuration\">Git configuration<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#git-configuration\"></a></h1>\n<ul>\n<li>Once you're done fixing the ssh keys, you'll have to configure the remote URL\nfor git and the user name and email for the repo you're working with. By\ndefault you will be making commits with the user/email in your global\n<code>gitconfig</code>, but you can override this in a specific repo with the following:\n<ul>\n<li><code>git config user.name \"Your Name Here\"</code></li>\n<li><code>git config user.email your@email.com</code></li>\n<li>Use the following to update your git origin remote URL:\n<ul>\n<li><code>git remote add origin git@{personalHost}:{personal}/{personalRepo}.git</code></li>\n<li><code>git remote -v</code></li>\n</ul>\n</li>\n<li>Make local commit to both repos then use <code>git log</code> to verify:\n<ul>\n<li>Make a small change to a file.</li>\n<li>Do a <code>git add</code>.</li>\n<li>Do a <code>git commit</code>.</li>\n<li>Do <code>git log</code> and check that the author name.</li>\n<li>Do <code>git reset HEAD~1</code> to undo the local commit you just made.</li>\n<li>Undo the small change you made to the file.</li>\n<li>You should get different author names between the two repos.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>In the future, you can set the <code>url</code> in the repo's git config file by\nmodifying the git clone text that GitHub provides.\n<ul>\n<li>Say the text is <code>git@github.com:{personal}/{personalRepo}.git</code>. You can\nmodify the text to <code>git@github.com-personal:{personal}/{personalRepo}.git</code>\nwhere <code>github.com-personal</code> corresponds to the <code>host</code> of the ssh key you\nwant to use from your <code>~/.ssh/config</code> file.\n<ul>\n<li>This will set the <code>personalRepo/.git/config</code> file to use the url\n<code>git@github.com-personal:{personal}/{personalRepo}.git</code>.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"additional-notes\">Additional notes<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#additional-notes\"></a></h1>\n<ul>\n<li>Converting a local vault into a private vault with the Dendron command in\nVisual Studio didn't entirely work for me, so I think it's best to just\nconvert it manually.\n<ul>\n<li>Development of new Dendron features has stopped so it'll probably stay in\nthe same state.</li>\n</ul>\n</li>\n<li>Steps I took for configuring which git account to use for commits in a new git\nrepo:\n<ul>\n<li><code>git init</code></li>\n<li><code>git remote add origin git@{personalHost}:{personal}/{personalRepo}.git</code></li>\n<li><code>git remote -v</code></li>\n<li><code>ssh -T {personalHost}</code></li>\n<li><code>git config user.name \"Your Name Here\"</code></li>\n<li><code>git config user.email your@email.com</code></li>\n</ul>\n</li>\n<li><a href=\"https://wiki.dendron.so/notes/aikv0yamnfkcowlol7qeldy/#manual-migration-instructions\">Manual migration of vaults to make them self contained</a>\n<ul>\n<li>I used this to figure out what the <code>.yml</code> and workspace files should look\nlike in the vault that I'm publishing.</li>\n<li>If you're getting an issue with GitHub Actions being denied, then see\n<a href=\"https://stackoverflow.com/a/75308228\"><code>tdy</code> on checking permissions if GitHub Actions is being denied</a>.</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"resources\">Resources<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#resources\"></a></h1>\n<ul>\n<li><a href=\"https://gist.github.com/jexchan/2351996?permalink_comment_id=3495142#gistcomment-3495142\"><code>k-o-d-r</code> discussing how to use an alias for git cloning</a></li>\n<li><a href=\"https://gist.github.com/jexchan/2351996?permalink_comment_id=4286595#gistcomment-4286595\"><code>troccoli</code> discussing how the generic <code>*</code> host supercedes all of the other ssh keys</a></li>\n<li><a href=\"https://gist.github.com/alejandro-martin/aabe88cf15871121e076f66b65306610#using-two-accounts-from-the-same-server-website-optional\"><code>alejandro-martin</code> discussing setting up two ssh's with the same website (GitHub) </a></li>\n<li><a href=\"https://gist.github.com/oanhnn/80a89405ab9023894df7\"><code>oanhnn</code> discussing how to test your ssh key connection</a></li>\n<li><a href=\"https://stackoverflow.com/a/23730614\"><code>Sharadh</code> discussing how to use the verbose version of <code>ssh -T</code></a></li>\n<li><a href=\"https://stackoverflow.com/a/11251797\"><code>mikemaccana</code> on setting git remote</a></li>\n<li><a href=\"https://stackoverflow.com/a/10183740\"><code>Peter Mortensen</code> on how to list git remote URLs</a></li>\n<li><a href=\"https://stackoverflow.com/a/75308228\"><code>tdy</code> on checking permissions if GitHub Actions is being denied</a></li>\n<li><a href=\"https://wiki.dendron.so/notes/FnK2ws6w1uaS1YzBUY3BR/\">Guide to deploying to GitHub Pages normally</a></li>\n</ul>","noteIndex":{"id":"tm4x9nhy44fl9m3ex9rihwy","title":"Root","desc":"","updated":1683397745938,"created":1677391337155,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"blog","remote":{"type":"git","url":"git@blog:6notes/blog.git"}},"contentHash":"3d59a1e3e5d264c1331f58d35136185d","links":[{"type":"ref","from":{"fname":"root","id":"tm4x9nhy44fl9m3ex9rihwy","vaultName":"blog"},"value":"blog.coding.mobile.fixAddressBarBlock","position":{"start":{"line":6,"column":1,"offset":85},"end":{"line":6,"column":56,"offset":140},"indent":[]},"xvault":false,"to":{"fname":"blog.coding.mobile.fixAddressBarBlock","anchorHeader":"Problem,1:#*"}},{"type":"ref","from":{"fname":"root","id":"tm4x9nhy44fl9m3ex9rihwy","vaultName":"blog"},"value":"blog.writing.twine.setup","position":{"start":{"line":10,"column":1,"offset":195},"end":{"line":10,"column":41,"offset":235},"indent":[]},"xvault":false,"to":{"fname":"blog.writing.twine.setup","anchorHeader":"setup,1:#*"}},{"type":"ref","from":{"fname":"root","id":"tm4x9nhy44fl9m3ex9rihwy","vaultName":"blog"},"value":"blog.coding.dendronFrontmatter","position":{"start":{"line":14,"column":1,"offset":302},"end":{"line":14,"column":49,"offset":350},"indent":[]},"xvault":false,"to":{"fname":"blog.coding.dendronFrontmatter","anchorHeader":"Summary,1:#*"}},{"from":{"fname":"blog","id":"lg9sys4ueuuf8w1dnrczgm0","vaultName":"blog"},"type":"backlink","position":{"start":{"line":9,"column":1,"offset":181},"end":{"line":9,"column":10,"offset":190},"indent":[]},"value":"root"}],"anchors":{"6notes-blog":{"type":"header","text":"6notes' Blog","value":"6notes-blog","line":8,"column":0,"depth":1},"20230506---fixing-address-bar-blocking-mobile-sites-in-safari":{"type":"header","text":"2023.05.06 - Fixing address bar blocking mobile sites in Safari","value":"20230506---fixing-address-bar-blocking-mobile-sites-in-safari","line":10,"column":0,"depth":2},"20230423---twinetweego-and-github-pages-setup":{"type":"header","text":"2023.04.23 - Twine/Tweego and GitHub Pages Setup","value":"20230423---twinetweego-and-github-pages-setup","line":14,"column":0,"depth":2},"20230410---creating-the-dendron-frontmattter-generator-app":{"type":"header","text":"2023.04.10 - Creating the Dendron Frontmattter Generator App","value":"20230410---creating-the-dendron-frontmattter-generator-app","line":18,"column":0,"depth":2}},"children":["lg9sys4ueuuf8w1dnrczgm0"],"parent":null,"data":{},"body":"\n# 6notes' Blog\n\n## 2023.05.06 - Fixing address bar blocking mobile sites in Safari\n\n![[blog.coding.mobile.fixAddressBarBlock#Problem,1:#*]]\n\n## 2023.04.23 - Twine/Tweego and GitHub Pages Setup\n\n![[blog.writing.twine.setup#setup,1:#*]]\n\n## 2023.04.10 - Creating the Dendron Frontmattter Generator App\n\n![[blog.coding.dendronFrontmatter#Summary,1:#*]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"blog","remote":{"type":"git","url":"git@blog:6notes/blog.git"}}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","theme":"dark","assetsPrefix":"/blog","siteUrl":"https://6notes.github.io/","duplicateNoteBehavior":{"action":"useVault","payload":["blog","personal notes"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}